<div class="stepper h-100">
  <mat-stepper
    (selectionChange)="onStepSelectionChange($event)"
    class="flex-grow-1 w-100 h-100"
    linear="false"
    #stepper
    [orientation]="(stepperOrientation | async)!"
  >
    <mat-step
      [stepControl]="complaintReportingFormGroup"
      [editable]="!complaintSubmitted"
      [completed]="complaintSubmitted"
      class="w-75 h-100"
    >
      <form
        [formGroup]="complaintReportingFormGroup"
        class="w-100 h-100 d-flex flex-column gap-2"
      >
        <ng-template matStepLabel>Preliminary Information</ng-template>

        <div class="flex-grow-1 bg-white rounded-3 shadow px-3 px-sm-5 py-3">
          <div>
            <h2>What best describes you?</h2>
            <mat-chip-listbox
              aria-label="User role selection"
              formControlName="userType"
            >
              <mat-chip-option [value]="UserTypes.Patient"
                >Patient</mat-chip-option
              >
              <mat-chip-option [value]="UserTypes.HealthcareProfessional"
                >Healthcare Professional</mat-chip-option
              >
              <mat-chip-option [value]="UserTypes.NonHealthcareProfessional"
                >Non-Healthcare Professional
                (Parent/Relative/Friend/Guardian)</mat-chip-option
              >
              <mat-chip-option [value]="UserTypes.Manufacturer"
                >Manufacturer</mat-chip-option
              >
              <mat-chip-option [value]="UserTypes.Employees"
                >Employees</mat-chip-option
              >
            </mat-chip-listbox>
          </div>

          <div
            *ngIf="!complaintReportingFormGroup.controls.userType.value"
            class="d-flex align-items-center justify-content-center p-2 border rounded-3 min-height-300 empty-selection"
          >
            <h2>There has been no selection of role.</h2>
          </div>

          <ng-container
            *ngIf="complaintReportingFormGroup.controls.userType.value"
          >
            <div class="mt-3">
              <mat-form-field
                class="default-control-width"
                appearance="outline"
              >
                <mat-label
                  >Which country the product was purchased in?</mat-label
                >
                <mat-select formControlName="purchasedCountry">
                  <mat-option
                    *ngFor="let country of countries"
                    [value]="country"
                    >{{ country }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>
            <!-- <h2 class="mt-4 mb-2">
              Please select a product for which you want to report an event?
            </h2>
            <div class="d-flex flex-column vertical-tabs-section mb-4">
              <div
                ngbNav
                #nav="ngbNav"
                class="nav-pills vertical-tabs align-items-start"
                (navChange)="onTabsChange()"
              >
                <ng-container *ngFor="let product of products">
                  <ng-container [ngbNavItem]="product.type">
                    <button
                      ngbNavLink
                      class="d-flex flex-column align-items-center justify-content-center"
                    >
                      <img
                        [ngSrc]="product.imagePath"
                        width="150"
                        height="150"
                        [alt]="product.name"
                      />
                      <div>{{ product.name }}</div>
                    </button>
                    <ng-template ngbNavContent>
                      <div class="d-flex flex-wrap gap-4 my-2">
                        <label *ngFor="let brand of product.brands">
                          <input
                            type="radio"
                            name="brand"
                            [value]="brand.name"
                            formControlName="brand"
                            (change)="onBrandSelectionChange(brand.name)"
                            class="mb-2"
                          />
                          <img
                            [ngSrc]="brand.imagePath"
                            width="200"
                            height="150"
                            [alt]="brand.name"
                            class="product-image"
                          />
                        </label>
                      </div>
                    </ng-template>
                  </ng-container>
                </ng-container>
              </div>

              <div class="border rounded-3 w-100 mt-2">
                <h2 class="px-3 pt-2 mb-0 text-secondary" *ngIf="nav.activeId">
                  Select a brand below
                </h2>
                <div [ngbNavOutlet]="nav"></div>
              </div>
            </div> -->

            <div class="products_section vertical-tabs-section">
              <h2 class="mb-1">Report an event for the following product</h2>
              <p class="mb-3 lh-base">
                Please note that the product pictures displayed are for
                illustrative purposes only. The color and appearance of the
                actual product may differ in your location.
              </p>
              <!-- <div class="d-flex flex-wrap gap-3">
                <ng-container *ngFor="let product of products"> -->
              <!-- <div class="d-flex flex-column align-items-center justify-content-center rounded-3 p-3" style="box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;">
                    <img [ngSrc]="product.imagePath"
                          width="150"
                          height="150"
                          [alt]="product.name"
                        />
                    <div class="fw-semibold">{{ product.name }}</div>
                </div> -->
              <div class="d-flex flex-wrap gap-4 mx-2 my-2 align-items-end">
                <ng-container *ngFor="let product of products; let i = index">
                  <label *ngIf="showAllProducts || selectedProductIndex === i">
                    <input
                      type="radio"
                      name="product"
                      [value]="product.name"
                      formControlName="product"
                      (change)="onProductSelectionChange(i)"
                      class="mb-2"
                    />
                    <div
                      class="product-section d-flex flex-column align-items-center justify-content-center rounded-3"
                    >
                      <div class="image-section">
                        <img
                        [ngSrc]="product.imagePath"
                        width="150"
                        height="150"
                        [alt]="product.name"
                      />
                      </div>
                      <div class="fw-semibold py-2">{{ product.name }}</div>
                    </div>
                  </label>
                </ng-container>
                <button
                  mat-stroked-button
                  color="secondary"
                  (click)="toggleProducts()"
                  *ngIf="complaintReportingFormGroup.controls.product.value"
                >
                  {{
                    showAllProducts
                      ? "Hide other Products"
                      : "Show all Products"
                  }}
                </button>
              </div>
              <!-- </ng-container>
              </div> -->
            </div>

            <div class="brands_section" #brandsSection>
              <div
                class="vertical-tabs-section my-3"
                *ngIf="complaintReportingFormGroup.controls.product.value"
              >
                <h2 class="mb-1">Select a brand below</h2>
                <ng-container *ngFor="let product of products">
                  <div
                    class="d-flex flex-wrap gap-4 mx-2 my-2"
                    *ngIf="
                      complaintReportingFormGroup.controls.product.value ===
                      product.name
                    "
                  >
                    <label *ngFor="let brand of product.brands">
                      <input
                        type="radio"
                        name="brand"
                        [value]="brand.name"
                        formControlName="brand"
                        (change)="onBrandSelectionChange(brand.name)"
                        class="mb-2" 
                      />
                      <div
                        class="product-section d-flex flex-column align-items-center justify-content-center rounded-3"
                      >
                        <img
                          [ngSrc]="brand.imagePath"
                          width="150"
                          height="150"
                          [alt]="brand.name"
                        />
                      </div>
                    </label>
                  </div>
                </ng-container>
                <!-- </ng-container>
                </div> -->
              </div>
            </div>
            <!-- <div class="chip-options-end chip-options-sections mb-3">
              <h2 class="mb-1">
                Please select a product for which you want to report an event?
              </h2>
              <mat-chip-listbox
                aria-label="Product selection"
                formControlName="product"
                class="mb-2"
              >
                <ng-container *ngFor="let product of products">
                  <mat-chip-option
                    [value]="product.type"
                    (selectionChange)="onProductSelectionChange(product.type)"
                  >
                    <img
                      [ngSrc]="product.imagePath"
                      width="20"
                      height="20"
                      [alt]="product.name"
                    />
                    <div>{{ product.name }}</div>
                  </mat-chip-option>
                </ng-container>
              </mat-chip-listbox>

              <div
                *ngIf="
                  complaintReportingFormGroup.controls.product.value;
                  else noProduct
                "
                class="mb-3"
                style="
                  background-color: #f4f3f6;
                  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
                "
              >
                <h2 class="px-3 pt-2 mb-0 text-secondary">
                  Select a brand below
                </h2>
                <ng-container *ngFor="let product of products">
                  <ng-container
                    *ngIf="
                      complaintReportingFormGroup.controls.product.value ===
                      product.type
                    "
                  >
                    <div
                      class="d-flex flex-wrap gap-4 my-2 border rounded-3 w-100 p-3"
                    >
                      <label *ngFor="let brand of product.brands">
                        <input
                          type="radio"
                          name="brand"
                          [value]="brand.name"
                          formControlName="brand"
                          (change)="onBrandSelectionChange(brand.name)"
                          class="mb-2"
                        />
                        <img
                          [ngSrc]="brand.imagePath"
                          width="200"
                          height="150"
                          [alt]="brand.name"
                          class="product-image"
                        />
                      </label>
                    </div>
                  </ng-container>
                </ng-container>
              </div>

              <ng-template #noProduct>
                <div
                  class="d-flex align-items-center justify-content-center border rounded-3 p-5 mb-3"
                  style="
                    background-color: #f4f3f6;
                    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
                  "
                >
                  <h2 class="fw-semibold text-secondary">
                    The product was not selected
                  </h2>
                </div>
              </ng-template>
            </div> -->
          </ng-container>

          <div class="my-3"
            *ngIf="complaintReportingFormGroup.controls.brand.value" #strengthSection
          >
            <div class="mt-3">
              <mat-form-field
                class="default-control-width"
                appearance="outline"
              >
                <mat-label
                  >Please select a strength for which you want to report an
                  event?</mat-label
                >
                <mat-select formControlName="strength">
                  <mat-option value="50.00 MG">50.00 MG</mat-option>
                  <mat-option value="5 doses of 0.50 mL"
                    >5 doses of 0.50 mL</mat-option
                  >
                  <mat-option value="100.00 MG">100.00 MG</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="mb-3">
              <mat-form-field
                class="default-control-width"
                appearance="outline"
              >
                <mat-label
                  >Are you willing to return the product back to us</mat-label
                >
                <mat-hint
                  >Field product return pre-paid kit will be provided</mat-hint
                >
                <mat-select formControlName="returnOption">
                  <mat-option
                    *ngFor="let option of returnOptionValues"
                    [value]="option"
                    >{{ option }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>

            <!-- <div *ngIf="complaintReportingFormGroup.controls.purchasedCountry.value"> -->
            <div class="mb-2">
              <!-- <mat-form-field class="default-control-width mb-2"> -->
              <!-- <mat-label>Are you reporting the complaint from the same country?</mat-label> -->
              <div class="d-flex align-items-center">
                <label>Do you know the Batch/Lot Number</label>
                <button
                  mat-icon-button
                  matSuffix
                  (click)="showLotNumberHelp()"
                  [attr.aria-label]="'Help finding this'"
                  style="width: 30px; height: 30px; padding: 0 10px"
                >
                  <mat-icon>help</mat-icon>
                </button>
              </div>
              <mat-radio-group
                aria-label="Do you know the Batch or Lot Number"
                color="primary"
                formControlName="hasBatchLotNumber"
              >
                <mat-radio-button [value]="true" class="me-2"
                  >Yes</mat-radio-button
                >
                <mat-radio-button [value]="false">No</mat-radio-button>
              </mat-radio-group>

              <!-- </mat-form-field> -->
            </div>

            <div
              *ngIf="
                complaintReportingFormGroup.controls.hasBatchLotNumber.value &&
                complaintReportingFormGroup.controls.hasBatchLotNumber.value ===
                  true
              "
              class="mt-3"
            >
              <mat-form-field
                class="default-control-width"
                appearance="outline"
              >
                <mat-label>Please enter Batch/Lot Number</mat-label>
                <input
                  matInput
                  placeholder="Please enter Batch/Lot Number"
                  formControlName="batchLotNumber"
                />
                <!-- <button
                  mat-icon-button
                  matSuffix
                  (click)="showLotNumberHelp()"
                  [attr.aria-label]="'Help finding this'"
                >
                  <mat-icon>help</mat-icon>
                </button> -->
              </mat-form-field>
            </div>

            <div
              *ngIf="
                !complaintReportingFormGroup.controls.hasBatchLotNumber.value &&
                complaintReportingFormGroup.controls.hasBatchLotNumber.value ==
                  false
              "
            >
              <div class="mt-3">
                <mat-form-field
                  class="default-control-width"
                  appearance="outline"
                >
                  <mat-label
                    >Reason for not providing the batch/lot number</mat-label
                  >
                  <input
                    matInput
                    placeholder="Reason for not providing the batch/lot number"
                    formControlName="noReason"
                  />
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-sm-12 col-lg-6">
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label>GTIN #</mat-label>
                  <input matInput placeholder="GTIN #" formControlName="gtin" />
                </mat-form-field>
              </div>

              <div class="col-sm-12 col-lg-6">
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label>Serial #</mat-label>
                  <input
                    matInput
                    placeholder="Serial #"
                    formControlName="serial"
                  />
                </mat-form-field>
              </div>
            </div>

            <div
              formGroupName="hcp"
              class="mt-1"
              *ngIf="
                complaintReportingFormGroup.controls.userType.value ===
                UserTypes.HealthcareProfessional
              "
            >
              <div>
                <mat-form-field
                  class="default-control-width"
                  appearance="outline"
                >
                  <mat-label
                    >Was this complaint reported from a J&J program?</mat-label
                  >
                  <mat-select formControlName="reportedFromJNJProgram">
                    <mat-option [value]="true" class="me-2">Yes</mat-option>
                    <mat-option [value]="false">No</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div
                class="row"
                *ngIf="
                  complaintReportingFormGroup.get('hcp.reportedFromJNJProgram')
                    ?.value === true
                "
              >
                <div class="col-sm-12 col-lg-4">
                  <mat-form-field
                    class="default-control-width"
                    appearance="outline"
                  >
                    <mat-label>Study Program</mat-label>
                    <input
                      matInput
                      placeholder="Study Program"
                      formControlName="studyProgram"
                    />
                  </mat-form-field>
                </div>
                <div class="col-sm-12 col-lg-4">
                  <mat-form-field
                    class="default-control-width"
                    appearance="outline"
                  >
                    <mat-label>Site Number</mat-label>
                    <input
                      matInput
                      placeholder="Site Number"
                      formControlName="siteNumber"
                    />
                  </mat-form-field>
                </div>
                <div class="col-sm-12 col-lg-4">
                  <mat-form-field
                    class="default-control-width"
                    appearance="outline"
                  >
                    <mat-label>Subject Number</mat-label>
                    <input
                      matInput
                      placeholder="Subject Number"
                      formControlName="subjectNumber"
                    />
                  </mat-form-field>
                </div>
              </div>
            </div>

            <div class="mt-1">
              <p class="lh-base">
                Which part of the product you want to report the complaint for?
              </p>

              <div *ngFor="let question of imageHotspotValues">
                <ng-container *ngIf="question.type === 'image-map'">
                  <label *ngIf="question.questionText">{{
                    question.questionText
                  }}</label>
                  <app-image-map
                    [imageSrc]="question.imageUrl"
                    [areas]="question.areas"
                  ></app-image-map>
                </ng-container>
              </div>
            </div>

            <div class="mb-1 mt-2">
              <mat-form-field
                class="default-control-width mb-2"
                appearance="outline"
              >
                <mat-label>Describe your issue</mat-label>
                <mat-hint
                  >Please include any details that may be relevant</mat-hint
                >
                <textarea
                  matInput
                  placeholder="Describe your issue"
                  formControlName="issueDescription"
                ></textarea>
              </mat-form-field>
            </div>

            <div class="mb-1">
              <app-image-upload
                formControlName="uploadImage"
                text="Upload images (optional)"
              ></app-image-upload>
            </div>
          </div>
        </div>

        <div class="mt-4 d-flex justify-content-end w-100">
          <button
            mat-raised-button
            color="primary"
            class="primary-btn"
            matStepperNext
            [disabled]="!complaintReportingFormGroup.valid"
          >
            Continue <mat-icon iconPositionEnd>arrow_forward</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step
      [stepControl]="userDetailsFormGroup"
      [editable]="!complaintSubmitted"
      [completed]="complaintSubmitted"
      class="w-75 h-100"
    >
      <form
        [formGroup]="userDetailsFormGroup"
        class="w-100 h-100 d-flex flex-column gap-2"
      >
        <ng-template matStepLabel>User Details</ng-template>

        <div
          class="flex-grow-1 bg-white rounded-3 shadow px-3 px-sm-5 py-3 mt-2"
        >
          <div
            *ngIf="
              complaintReportingFormGroup.controls.userType.value ===
              UserTypes.Patient
            "
            class="mt-2"
          >
            <h2>PATIENT INFORMATION</h2>
            <div formGroupName="patientInformation">
              <div>
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label
                    >Does J & J have permission to contact you about this
                    report?</mat-label
                  >
                  <mat-select formControlName="permissionToContact">
                    <mat-option
                      *ngFor="let option of permissionToContactValues"
                      [value]="option"
                      >{{ option }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>

              <div formGroupName="patient">
                <div class="row">
                  <div class="col-sm-12 col-lg-2">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Title</mat-label>
                      <mat-select formControlName="title">
                        <mat-option
                          *ngFor="let option of titleOptions"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-12 col-lg-5">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>First Name</mat-label>
                      <input
                        matInput
                        placeholder="First Name"
                        formControlName="firstName"
                      />
                    </mat-form-field>
                  </div>

                  <div class="col-sm-12 col-lg-5">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Last Name</mat-label>
                      <input
                        matInput
                        placeholder="Last Name"
                        formControlName="lastName"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div formGroupName="contactInformation">
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 1</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 1"
                          formControlName="addressLine1"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 2</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 2"
                          formControlName="addressLine2"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>City</mat-label>
                        <input
                          matInput
                          placeholder="City"
                          formControlName="city"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Country</mat-label>
                        <mat-select formControlName="country">
                          <mat-option
                            *ngFor="let country of countries"
                            [value]="country"
                            >{{ country }}</mat-option
                          >
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Postal Code</mat-label>
                        <input
                          matInput
                          placeholder="Postal Code"
                          formControlName="postalCode"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>State</mat-label>
                        <input
                          matInput
                          placeholder="State"
                          formControlName="state"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Telephone</mat-label>
                        <input
                          matInput
                          placeholder="Telephone"
                          formControlName="telephone"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Email Address</mat-label>
                        <input
                          matInput
                          placeholder="Email Address"
                          formControlName="emailAddress"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </div>

                <div>
                  <div class="mb-2">
                    <div>
                      <label>Is the product available at this address?</label>
                    </div>
                    <mat-radio-group
                      aria-label="Is the product available at this address?"
                      color="primary"
                      formControlName="isProductAvailable"
                    >
                      <mat-radio-button
                        [value]="true"
                        class="me-2"
                        (change)="onPatientRadioChange($event.value)"
                        >Yes</mat-radio-button
                      >
                      <mat-radio-button
                        [value]="false"
                        (change)="onPatientRadioChange($event.value)"
                        >No</mat-radio-button
                      >
                    </mat-radio-group>
                  </div>
                </div>

                <div
                  *ngIf="
                    userDetailsFormGroup.get(
                      'patientInformation.patient.isProductAvailable'
                    )?.value === false
                  "
                  formGroupName="additionalContactInformation"
                >
                  <h3 class="fw-semibold">
                    Please provide the below address details for pickup
                  </h3>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 1</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 1"
                          formControlName="addressLine1"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 2</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 2"
                          formControlName="addressLine2"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>City</mat-label>
                        <input
                          matInput
                          placeholder="City"
                          formControlName="city"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Country</mat-label>
                        <mat-select formControlName="country">
                          <mat-option
                            *ngFor="let country of countries"
                            [value]="country"
                            >{{ country }}</mat-option
                          >
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Postal Code</mat-label>
                        <input
                          matInput
                          placeholder="Postal Code"
                          formControlName="postalCode"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>State</mat-label>
                        <input
                          matInput
                          placeholder="State"
                          formControlName="state"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Telephone</mat-label>
                        <input
                          matInput
                          placeholder="Telephone"
                          formControlName="telephone"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Email Address</mat-label>
                        <input
                          matInput
                          placeholder="Email Address"
                          formControlName="emailAddress"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Date of Birth</mat-label>
                      <input
                        matInput
                        [matDatepicker]="dobPicker"
                        placeholder="Date of Birth"
                        formControlName="dateOfBirth"
                      />
                      <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
                      <mat-datepicker-toggle
                        matIconSuffix
                        [for]="dobPicker"
                      ></mat-datepicker-toggle>
                      <mat-datepicker #dobPicker></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Age at Complaint</mat-label>
                      <input
                        matInput
                        placeholder="Age at Complaint"
                        formControlName="ageAtComplaint"
                      />
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div
                *ngIf="
                  complaintReportingFormGroup.controls.userType.value ===
                    UserTypes.Patient ||
                  complaintReportingFormGroup.controls.userType.value ===
                    UserTypes.HealthcareProfessional
                "
              >
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label
                    >Is the physician or treating HCP aware of the
                    complaint?</mat-label
                  >
                  <mat-select formControlName="awareOfComplaint">
                    <mat-option
                      *ngFor="let option of physicianAwarenessValues"
                      [value]="option"
                      >{{ option }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>

              <div>
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label
                    >Does J & J have permission to contact your healthcare
                    provider about this report?</mat-label
                  >
                  <mat-select formControlName="permissionToContactHCP">
                    <mat-option
                      *ngFor="let option of permissionToContactHCPValues"
                      [value]="option"
                      >{{ option }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>
              <div
                formGroupName="hcp"
                *ngIf="
                  userDetailsFormGroup.get(
                    'patientInformation.permissionToContactHCP'
                  )?.value === 'Yes'
                "
              >
                <p class="fw-semibold">Healthcare provider Details</p>
                <div class="row">
                  <div class="col-sm-12 col-lg-2">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Title</mat-label>
                      <mat-select formControlName="title">
                        <mat-option
                          *ngFor="let option of titleOptions"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-12 col-lg-5">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>First Name</mat-label>
                      <input
                        matInput
                        placeholder="First Name"
                        formControlName="firstName"
                      />
                    </mat-form-field>
                  </div>

                  <div class="col-sm-12 col-lg-5">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Last Name</mat-label>
                      <input
                        matInput
                        placeholder="Last Name"
                        formControlName="lastName"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div formGroupName="contactInformation">
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 1</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 1"
                          formControlName="addressLine1"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 2</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 2"
                          formControlName="addressLine2"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>City</mat-label>
                        <input
                          matInput
                          placeholder="City"
                          formControlName="city"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Country</mat-label>
                        <mat-select formControlName="country">
                          <mat-option
                            *ngFor="let country of countries"
                            [value]="country"
                            >{{ country }}</mat-option
                          >
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Postal Code</mat-label>
                        <input
                          matInput
                          placeholder="Postal Code"
                          formControlName="postalCode"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>State</mat-label>
                        <input
                          matInput
                          placeholder="State"
                          formControlName="state"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Telephone</mat-label>
                        <input
                          matInput
                          placeholder="Telephone"
                          formControlName="telephone"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Email Address</mat-label>
                        <input
                          matInput
                          placeholder="Email Address"
                          formControlName="emailAddress"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div
                formGroupName="patientMedicalHistory"
                *ngIf="showMedicalHistory"
              >
                <div>
                  <mat-form-field
                    class="default-control-width mb-2"
                    appearance="outline"
                  >
                    <mat-label>Medical history of the patient</mat-label>
                    <textarea
                      matInput
                      placeholder="Medical History"
                      formControlName="medicalHistory"
                    ></textarea>
                  </mat-form-field>
                </div>
                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label
                        >Does the Patient have any allergies?</mat-label
                      >
                      <mat-select formControlName="allergies">
                        <mat-option
                          *ngFor="let option of allergyStatusValues"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div
                    class="col-sm-12 col-lg-6"
                    *ngIf="
                      userDetailsFormGroup.get(
                        'patientInformation.patientMedicalHistory.allergies'
                      )?.value === 'Yes'
                    "
                  >
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Provide details of the allergies</mat-label>
                      <input
                        matInput
                        placeholder="Provide details of the allergies"
                        formControlName="allergyDetails"
                      />
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label
                        >Was the drug abuse or illicit drug usage?</mat-label
                      >
                      <mat-select formControlName="drugAbuse">
                        <mat-option
                          *ngFor="let option of drugAbuseStatusValues"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div
                    class="col-sm-12 col-lg-6"
                    *ngIf="
                      userDetailsFormGroup.get(
                        'patientInformation.patientMedicalHistory.drugAbuse'
                      )?.value === 'Yes'
                    "
                  >
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label
                        >Provide details of drug abuse or illicit drug
                        usage</mat-label
                      >
                      <input
                        matInput
                        placeholder="Provide details of drug abuse or illicit drug usage"
                        formControlName="drugAbuseDetails"
                      />
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Does the Patient consume alchohol?</mat-label>
                      <mat-select formControlName="alcoholConsumption">
                        <mat-option
                          *ngFor="let option of alcoholConsumptionStatusValues"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div
                    class="col-sm-12 col-lg-6"
                    *ngIf="
                      userDetailsFormGroup.get(
                        'patientInformation.patientMedicalHistory.alcoholConsumption'
                      )?.value === 'Yes'
                    "
                  >
                    <div class="col-sm-12">
                      <div
                        class="row"
                        formGroupName="alcoholConsumptionDetails"
                      >
                        <div class="col-8 pe-0">
                          <mat-form-field
                            class="default-control-width mb-2"
                            appearance="outline"
                          >
                            <mat-label
                              >Provide details of alchohol
                              consumption</mat-label
                            >
                            <input
                              matInput
                              placeholder="Provide details of alchohol consumption"
                              formControlName="value"
                            />
                          </mat-form-field>
                        </div>
                        <div class="col-4 ps-0">
                          <mat-form-field
                            class="default-control-width mb-2"
                            appearance="outline"
                          >
                            <mat-select class="units" formControlName="unit">
                              <mat-option
                                *ngFor="let option of consumptionUnitValues"
                                [value]="option"
                                >{{ option }}</mat-option
                              >
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Does the patient smoke?</mat-label>
                      <mat-select formControlName="smokingStatus">
                        <mat-option
                          *ngFor="let option of smokingStatusValues"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div
                    class="col-sm-12 col-lg-6"
                    *ngIf="
                      userDetailsFormGroup.get(
                        'patientInformation.patientMedicalHistory.smokingStatus'
                      )?.value === 'Yes'
                    "
                  >
                    <div class="col-sm-12">
                      <div class="row" formGroupName="smokingDetails">
                        <div class="col-8 pe-0">
                          <mat-form-field
                            class="default-control-width mb-2"
                            appearance="outline"
                          >
                            <mat-label
                              >Provide details of cigarettes usage</mat-label
                            >
                            <input
                              matInput
                              placeholder="Provide details of cigarettes usage"
                              formControlName="value"
                            />
                          </mat-form-field>
                        </div>
                        <div class="col-4 ps-0">
                          <mat-form-field
                            class="default-control-width mb-2"
                            appearance="outline"
                          >
                            <mat-select class="units" formControlName="unit">
                              <mat-option
                                *ngFor="let option of consumptionUnitValues"
                                [value]="option"
                                >{{ option }}</mat-option
                              >
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->
            </div>
          </div>

          <div
            *ngIf="
              complaintReportingFormGroup.controls.userType.value !==
                UserTypes.Patient &&
              complaintReportingFormGroup.controls.userType.value !== null
            "
            class="mt-2"
          >
            <h2>PATIENT AND REPORTER INFORMATION</h2>
            <div formGroupName="patientReporterInformation">
              <div>
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label
                    >Does J&J have permission to contact the
                    reporter?</mat-label
                  >
                  <mat-select formControlName="permissionToContactReporter">
                    <mat-option
                      *ngFor="let option of permissionToContactReporterValues"
                      [value]="option"
                      >{{ option }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>
              <div formGroupName="patient">
                <p class="fw-semibold">Patient Details</p>
                <div class="row">
                  <div class="col-sm-12 col-lg-2">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Title</mat-label>
                      <mat-select formControlName="title">
                        <mat-option
                          *ngFor="let option of titleOptions"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-12 col-lg-5">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>First Name</mat-label>
                      <input
                        matInput
                        placeholder="First Name"
                        formControlName="firstName"
                      />
                    </mat-form-field>
                  </div>

                  <div class="col-sm-12 col-lg-5">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Last Name</mat-label>
                      <input
                        matInput
                        placeholder="Last Name"
                        formControlName="lastName"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div formGroupName="contactInformation">
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 1</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 1"
                          formControlName="addressLine1"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 2</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 2"
                          formControlName="addressLine2"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>City</mat-label>
                        <input
                          matInput
                          placeholder="City"
                          formControlName="city"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Country</mat-label>
                        <mat-select formControlName="country">
                          <mat-option
                            *ngFor="let country of countries"
                            [value]="country"
                            >{{ country }}</mat-option
                          >
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Postal Code</mat-label>
                        <input
                          matInput
                          placeholder="Postal Code"
                          formControlName="postalCode"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>State</mat-label>
                        <input
                          matInput
                          placeholder="State"
                          formControlName="state"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Telephone</mat-label>
                        <input
                          matInput
                          placeholder="Telephone"
                          formControlName="telephone"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Email Address</mat-label>
                        <input
                          matInput
                          placeholder="Email Address"
                          formControlName="emailAddress"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </div>

                <div>
                  <div class="mb-2">
                    <div>
                      <label>Is the product available at this address?</label>
                    </div>
                    <mat-radio-group
                      aria-label="Is the product available at this address?"
                      color="primary"
                      formControlName="isProductAvailable"
                    >
                      <mat-radio-button
                        [value]="true"
                        class="me-2"
                        (change)="onNonPatientReporterRadioChange($event.value)"
                        >Yes</mat-radio-button
                      >
                      <mat-radio-button
                        [value]="false"
                        (change)="onNonPatientReporterRadioChange($event.value)"
                        >No</mat-radio-button
                      >
                    </mat-radio-group>
                  </div>
                </div>

                <div
                  *ngIf="
                    userDetailsFormGroup.get(
                      'patientReporterInformation.patient.isProductAvailable'
                    )?.value === false
                  "
                  formGroupName="additionalContactInformation"
                >
                  <h3 class="fw-semibold">
                    Please provide the below address details for pickup
                  </h3>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 1</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 1"
                          formControlName="addressLine1"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 2</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 2"
                          formControlName="addressLine2"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>City</mat-label>
                        <input
                          matInput
                          placeholder="City"
                          formControlName="city"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Country</mat-label>
                        <mat-select formControlName="country">
                          <mat-option
                            *ngFor="let country of countries"
                            [value]="country"
                            >{{ country }}</mat-option
                          >
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Postal Code</mat-label>
                        <input
                          matInput
                          placeholder="Postal Code"
                          formControlName="postalCode"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>State</mat-label>
                        <input
                          matInput
                          placeholder="State"
                          formControlName="state"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Telephone</mat-label>
                        <input
                          matInput
                          placeholder="Telephone"
                          formControlName="telephone"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Email Address</mat-label>
                        <input
                          matInput
                          placeholder="Email Address"
                          formControlName="emailAddress"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Date of Birth</mat-label>
                      <input
                        matInput
                        [matDatepicker]="dobPicker"
                        formControlName="dateOfBirth"
                      />
                      <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
                      <mat-datepicker-toggle
                        matIconSuffix
                        [for]="dobPicker"
                      ></mat-datepicker-toggle>
                      <mat-datepicker #dobPicker></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Age at Complaint</mat-label>
                      <input
                        matInput
                        placeholder="Age at Complaint"
                        formControlName="ageAtComplaint"
                      />
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div formGroupName="reporter">
                <p class="fw-semibold">Reporter Details</p>
                <div class="row">
                  <div class="col-sm-12 col-lg-2">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Title</mat-label>
                      <mat-select formControlName="title">
                        <mat-option
                          *ngFor="let option of titleOptions"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-12 col-lg-5">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>First Name</mat-label>
                      <input
                        matInput
                        placeholder="First Name"
                        formControlName="firstName"
                      />
                    </mat-form-field>
                  </div>

                  <div class="col-sm-12 col-lg-5">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Last Name</mat-label>
                      <input
                        matInput
                        placeholder="Last Name"
                        formControlName="lastName"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div formGroupName="contactInformation">
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 1</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 1"
                          formControlName="addressLine1"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Address Line 2</mat-label>
                        <input
                          matInput
                          placeholder="Address Line 2"
                          formControlName="addressLine2"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>City</mat-label>
                        <input
                          matInput
                          placeholder="City"
                          formControlName="city"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Country</mat-label>
                        <mat-select formControlName="country">
                          <mat-option
                            *ngFor="let country of countries"
                            [value]="country"
                            >{{ country }}</mat-option
                          >
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Postal Code</mat-label>
                        <input
                          matInput
                          placeholder="Postal Code"
                          formControlName="postalCode"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>State</mat-label>
                        <input
                          matInput
                          placeholder="State"
                          formControlName="state"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Telephone</mat-label>
                        <input
                          matInput
                          placeholder="Telephone"
                          formControlName="telephone"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <mat-form-field
                        class="default-control-width mb-2"
                        appearance="outline"
                      >
                        <mat-label>Email Address</mat-label>
                        <input
                          matInput
                          placeholder="Email Address"
                          formControlName="emailAddress"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
              <div>
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label>Facility Name</mat-label>
                  <input
                    matInput
                    placeholder="Permission to Contact"
                    formControlName="facilityName"
                  />
                </mat-form-field>
              </div>
              <div>
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label
                    >Did the reporter administer the product?</mat-label
                  >
                  <mat-select formControlName="reporterAdministeredProduct">
                    <mat-option
                      *ngFor="let option of reporterAdministrationValues"
                      [value]="option"
                      >{{ option }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- <div
                formGroupName="patientMedicalHistory"
                *ngIf="showMedicalHistory"
              >
                <div>
                  <mat-form-field
                    class="default-control-width mb-2"
                    appearance="outline"
                  >
                    <mat-label>Medical history of the patient</mat-label>
                    <textarea
                      matInput
                      placeholder="Medical History"
                      formControlName="medicalHistory"
                    ></textarea>
                  </mat-form-field>
                </div>
                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label
                        >Does the Patient have any allergies?</mat-label
                      >
                      <mat-select formControlName="allergies">
                        <mat-option
                          *ngFor="let option of allergyStatusValues"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div
                    class="col-sm-12 col-lg-6"
                    *ngIf="
                      userDetailsFormGroup.get(
                        'patientInformation.patientMedicalHistory.allergies'
                      )?.value === 'Yes'
                    "
                  >
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Provide details of the allergies</mat-label>
                      <input
                        matInput
                        placeholder="Provide details of the allergies"
                        formControlName="allergyDetails"
                      />
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label
                        >Was the drug abuse or illicit drug usage?</mat-label
                      >
                      <mat-select formControlName="drugAbuse">
                        <mat-option
                          *ngFor="let option of drugAbuseStatusValues"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div
                    class="col-sm-12 col-lg-6"
                    *ngIf="
                      userDetailsFormGroup.get(
                        'patientInformation.patientMedicalHistory.drugAbuse'
                      )?.value === 'Yes'
                    "
                  >
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label
                        >Provide details of drug abuse or illicit drug
                        usage</mat-label
                      >
                      <input
                        matInput
                        placeholder="Provide details of drug abuse or illicit drug usage"
                        formControlName="drugAbuseDetails"
                      />
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Does the Patient consume alchohol?</mat-label>
                      <mat-select formControlName="alcoholConsumption">
                        <mat-option
                          *ngFor="let option of alcoholConsumptionStatusValues"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div
                    class="col-sm-12 col-lg-6"
                    *ngIf="
                      userDetailsFormGroup.get(
                        'patientInformation.patientMedicalHistory.alcoholConsumption'
                      )?.value === 'Yes'
                    "
                  >
                    <div class="col-sm-12">
                      <div
                        class="row"
                        formGroupName="alcoholConsumptionDetails"
                      >
                        <div class="col-8 pe-0">
                          <mat-form-field
                            class="default-control-width mb-2"
                            appearance="outline"
                          >
                            <mat-label
                              >Provide details of alchohol
                              consumption</mat-label
                            >
                            <input
                              matInput
                              placeholder="Provide details of alchohol consumption"
                              formControlName="value"
                            />
                          </mat-form-field>
                        </div>
                        <div class="col-4 ps-0">
                          <mat-form-field
                            class="default-control-width mb-2"
                            appearance="outline"
                          >
                            <mat-select class="units" formControlName="unit">
                              <mat-option
                                *ngFor="let option of consumptionUnitValues"
                                [value]="option"
                                >{{ option }}</mat-option
                              >
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12 col-lg-6">
                    <mat-form-field
                      class="default-control-width mb-2"
                      appearance="outline"
                    >
                      <mat-label>Does the patient smoke?</mat-label>
                      <mat-select formControlName="smokingStatus">
                        <mat-option
                          *ngFor="let option of smokingStatusValues"
                          [value]="option"
                          >{{ option }}</mat-option
                        >
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div
                    class="col-sm-12 col-lg-6"
                    *ngIf="
                      userDetailsFormGroup.get(
                        'patientInformation.patientMedicalHistory.smokingStatus'
                      )?.value === 'Yes'
                    "
                  >
                    <div class="col-sm-12">
                      <div class="row" formGroupName="smokingDetails">
                        <div class="col-8 pe-0">
                          <mat-form-field
                            class="default-control-width mb-2"
                            appearance="outline"
                          >
                            <mat-label
                              >Provide details of cigarettes usage</mat-label
                            >
                            <input
                              matInput
                              placeholder="Provide details of cigarettes usage"
                              formControlName="value"
                            />
                          </mat-form-field>
                        </div>
                        <div class="col-4 ps-0">
                          <mat-form-field
                            class="default-control-width mb-2"
                            appearance="outline"
                          >
                            <mat-select class="units" formControlName="unit">
                              <mat-option
                                *ngFor="let option of consumptionUnitValues"
                                [value]="option"
                                >{{ option }}</mat-option
                              >
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
        </div>
        <div class="mt-4 d-flex justify-content-between w-100">
          <button mat-stroked-button color="secondary" matStepperPrevious>
            <mat-icon>arrow_back</mat-icon> Back
          </button>
          <button
            mat-raised-button
            color="primary"
            class="primary-btn"
            matStepperNext
          >
            Continue <mat-icon iconPositionEnd>arrow_forward</mat-icon>
          </button>
        </div>

        <!-- <mat-accordion class="accordion-headers-align">
          <mat-expansion-panel
            [expanded]="personalInformationStep === 0"
            (opened)="personalInformationStep = 0"
            hideToggle
            formGroupName="personalData"
            (closed)="
              personalInformationStep =
                personalInformationStep === 0 ? null : personalInformationStep
            "
          >
            <mat-expansion-panel-header
              [class.invalid]="
                isExpansionStepInvalid(
                  personalInformationStep,
                  0,
                  personalInformationFormGroup.controls.personalData
                )
              "
            >
              <mat-panel-title> Personal Data </mat-panel-title>
              <mat-panel-description>
                <mat-icon>account_circle</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <div>
              <mat-form-field class="default-control-width">
                <mat-label>First Name</mat-label>
                <input
                  matInput
                  placeholder="First Name"
                  formControlName="firstName"
                />
              </mat-form-field>

              <mat-form-field class="default-control-width">
                <mat-label>Last Name</mat-label>
                <input
                  matInput
                  placeholder="Last Name"
                  formControlName="lastName"
                />
              </mat-form-field>
            </div>

            <div>
              <mat-form-field class="default-control-width">
                <mat-label>What is your birthdate?</mat-label>
                <input
                  matInput
                  [matDatepicker]="picker"
                  formControlName="birthdate"
                  autocomplete="bday"
                />
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle
                  matIconSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="mt-1">
              <mat-form-field class="default-control-width">
                <mat-label>What is your sex?</mat-label>
                <mat-select formControlName="sex">
                  <mat-option value="Male">Male</mat-option>
                  <mat-option value="Female">Female</mat-option>
                  <mat-option value="Other">Other</mat-option>
                  <mat-option value="Unspecified"
                    >Prefer not to answer</mat-option
                  >
                </mat-select>
              </mat-form-field>

              <ng-container
                *ngIf="
                  personalInformationFormGroup.controls.personalData.controls
                    .sex.value &&
                  personalInformationFormGroup.controls.personalData.controls
                    .sex.value !== 'Male'
                "
              >
                <mat-form-field class="default-control-width">
                  <mat-label>Are you currently pregnant?</mat-label>
                  <mat-select formControlName="pregnant">
                    <mat-option value="Yes">Yes</mat-option>
                    <mat-option value="No">No</mat-option>
                  </mat-select>
                </mat-form-field>
              </ng-container>
            </div>

            <mat-action-row class="justify-content-start">
              <div class="mt-4 d-flex justify-content-between w-100">
                <button mat-stroked-button color="secondary" matStepperPrevious>
                  <mat-icon>arrow_back</mat-icon> Back
                </button>

                <button
                  mat-raised-button
                  color="primary"
                  (click)="personalInformationStep = 1"
                >
                  Continue <mat-icon>arrow_forward</mat-icon>
                </button>
              </div>
            </mat-action-row>
          </mat-expansion-panel>

          <mat-expansion-panel
            [expanded]="personalInformationStep === 1"
            (opened)="personalInformationStep = 1"
            hideToggle
            formGroupName="physicalAddress"
            (closed)="
              personalInformationStep =
                personalInformationStep === 1 ? null : personalInformationStep
            "
          >
            <mat-expansion-panel-header
              [class.invalid]="
                isExpansionStepInvalid(
                  personalInformationStep,
                  1,
                  personalInformationFormGroup.controls.physicalAddress
                )
              "
            >
              <mat-panel-title> Physical Address </mat-panel-title>
              <mat-panel-description>
                <mat-icon>map</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <div>
              <mat-form-field class="default-control-width">
                <mat-label>Street Address</mat-label>
                <input
                  matInput
                  placeholder="Street Address"
                  formControlName="streetAddress"
                />
              </mat-form-field>
              <mat-form-field class="default-control-width">
                <mat-label>Street Address 2</mat-label>
                <input
                  matInput
                  placeholder="Street Address 2"
                  formControlName="streetAddress2"
                />
              </mat-form-field>
            </div>
            <div>
              <mat-form-field class="default-control-width">
                <mat-label>City</mat-label>
                <input matInput placeholder="City" formControlName="city" />
              </mat-form-field>
              <mat-form-field class="default-control-width">
                <mat-label>State</mat-label>
                <input
                  type="text"
                  matInput
                  formControlName="stateGroup"
                  required
                  [matAutocomplete]="autoGroup"
                  formControlName="state"
                />
                <mat-autocomplete #autoGroup="matAutocomplete">
                  <mat-optgroup
                    *ngFor="let group of stateGroupOptions$ | async"
                    [label]="group.letter"
                  >
                    <mat-option *ngFor="let name of group.names" [value]="name">
                      {{ name }}
                    </mat-option>
                  </mat-optgroup>
                </mat-autocomplete>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field class="default-control-width">
                <mat-label>Zip/Postal Code</mat-label>
                <input
                  matInput
                  placeholder="Zip/Postal Code"
                  formControlName="zipPostal"
                />
              </mat-form-field>
            </div>
            <mat-action-row class="justify-content-start">
              <div class="mt-4 d-flex justify-content-between w-100">
                <button
                  mat-stroked-button
                  color="secondary"
                  (click)="personalInformationStep = 0"
                >
                  <mat-icon>arrow_back</mat-icon> Back
                </button>
                <button mat-raised-button color="primary" matStepperNext>
                  Continue <mat-icon>arrow_forward</mat-icon>
                </button>
              </div>
            </mat-action-row>
          </mat-expansion-panel>
        </mat-accordion> -->
      </form>
    </mat-step>
    <!-- <mat-step
      [stepControl]="complaintDetailsFormGroup"
      [editable]="true"
      [editable]="!complaintSubmitted"
      [completed]="complaintSubmitted"
      class="w-75 h-100"
    >
      <form
        [formGroup]="complaintDetailsFormGroup"
        class="w-100 h-100 d-flex flex-column gap-2"
      >
        <ng-template matStepLabel>Complaint Details</ng-template>
        <div
          class="flex-grow-1 bg-white rounded-3 shadow px-3 px-sm-5 py-3 mt-2"
        >
          <div formGroupName="product">
            <div>
              <mat-form-field
                class="default-control-width mb-2"
                appearance="outline"
              >
                <mat-label
                  >Did the patient take the product as directed?</mat-label
                >
                <mat-select formControlName="tookProductAsDirected">
                  <mat-option value="Yes">Yes</mat-option>
                  <mat-option value="No">No</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field
                class="default-control-width mb-2"
                appearance="outline"
              >
                <mat-label>Who administered the Product? </mat-label>
                <mat-select formControlName="administeredBy">
                  <mat-option
                    *ngFor="let option of administeredByOptions"
                    [value]="option"
                    >{{ option }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>

            <div formGroupName="concomitantMedication">
              <div>
                <mat-form-field
                  class="default-control-width mb-2"
                  appearance="outline"
                >
                  <mat-label>Concomitant Medication Status</mat-label>
                  <mat-select formControlName="status">
                    <mat-option
                      *ngFor="let option of concomitantMedicationStatusOptions"
                      [value]="option"
                      >{{ option }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>
              <ng-container
                *ngIf="
                  complaintDetailsFormGroup.get(
                    'product.concomitantMedication.status'
                  )?.value === 'Yes'
                "
              >

                <mat-accordion
                  class="accordion-headers-align"
                  *ngIf="showConcomitantProductDetails"
                >
                  <mat-expansion-panel
                    [expanded]="true"
                    formGroupName="details"
                    class="mb-4 border"
                  >
                    <mat-expansion-panel-header>
                      <mat-panel-title class="fw-semibold"
                        >Concomitant Medication Details</mat-panel-title
                      >

                    </mat-expansion-panel-header>

                    <div class="row">
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Product Name</mat-label>
                          <input
                            matInput
                            placeholder="Product Name"
                            formControlName="productName"
                          />
                        </mat-form-field>
                      </div>
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Formulation</mat-label>
                          <input
                            matInput
                            placeholder="Formulation"
                            formControlName="formulation"
                          />
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Indication</mat-label>
                          <input
                            matInput
                            placeholder="Indication"
                            formControlName="indication"
                          />
                        </mat-form-field>
                      </div>
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Route of Administration</mat-label>
                          <mat-select formControlName="routeOfAdministration">
                            <mat-option
                              *ngFor="
                                let option of routeOfAdministrationOptions
                              "
                              [value]="option"
                              >{{ option }}</mat-option
                            >
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Start Date</mat-label>
                          <input
                            matInput
                            [matDatepicker]="startDatePicker"
                            placeholder="Start Date"
                            formControlName="startDate"
                          />
                          <mat-datepicker-toggle
                            matSuffix
                            [for]="startDatePicker"
                          ></mat-datepicker-toggle>
                          <mat-datepicker #startDatePicker></mat-datepicker>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>End Date</mat-label>
                          <input
                            matInput
                            [matDatepicker]="endDatePicker"
                            placeholder="End Date"
                            formControlName="endDate"
                          />
                          <mat-datepicker-toggle
                            matSuffix
                            [for]="endDatePicker"
                          ></mat-datepicker-toggle>
                          <mat-datepicker #endDatePicker></mat-datepicker>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Dose</mat-label>
                          <input
                            matInput
                            placeholder="Dose"
                            formControlName="dose"
                          />
                        </mat-form-field>
                      </div>
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Strength</mat-label>
                          <input
                            matInput
                            placeholder="Strength"
                            formControlName="strength"
                          />
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Frequency</mat-label>
                          <input
                            matInput
                            placeholder="Frequency"
                            formControlName="frequency"
                          />
                        </mat-form-field>
                      </div>
                      <div class="col-sm-12 col-lg-6">
                        <mat-form-field
                          class="default-control-width mb-2"
                          appearance="outline"
                        >
                          <mat-label>Frequency Time</mat-label>
                          <input
                            matInput
                            placeholder="Frequency Time"
                            formControlName="frequencyTime"
                          />
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="mb-1">
                      <app-image-upload
                        formControlName="optionalImage"
                        text="Upload images (optional)"
                      ></app-image-upload>
                    </div>

                    <mat-action-row class="justify-content-start">
                      <div class="d-flex justify-content-end w-100">
                        <button
                          mat-stroked-button
                          color="warn"
                          (click)="deleteConcomitantProduct()"
                        >
                          <mat-icon>delete</mat-icon> Delete
                        </button>
                      </div>
                    </mat-action-row>
                  </mat-expansion-panel>
                </mat-accordion>
                <div class="mb-3 d-flex align-items-center justify-content-end">
                  <button mat-stroked-button (click)="addConcomitantProduct()">
                    <mat-icon>add</mat-icon> Add concomitant product
                  </button>
                </div>
              </ng-container>
            </div>
          </div>
          <div>
            <mat-form-field
              class="default-control-width mb-2"
              appearance="outline"
            >
              <mat-label
                >Was this complaint reported from a J&J program?</mat-label
              >
              <mat-select formControlName="reportedFromJNJProgram">
                <mat-option value="Yes">Yes</mat-option>
                <mat-option value="No">No</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <ng-container
            *ngIf="
              complaintDetailsFormGroup.get('reportedFromJNJProgram')?.value ===
              'Yes'
            "
          >
            <div>
              <mat-form-field
                class="default-control-width mb-2"
                appearance="outline"
              >
                <mat-label>Study Program</mat-label>
                <input
                  matInput
                  placeholder="Study Program"
                  formControlName="studyProgram"
                />
              </mat-form-field>
            </div>
            <div>
              <mat-form-field
                class="default-control-width mb-2"
                appearance="outline"
              >
                <mat-label>Site Number</mat-label>
                <input
                  matInput
                  placeholder="Site Number"
                  formControlName="siteNumber"
                />
              </mat-form-field>
            </div>
            <div>
              <mat-form-field
                class="default-control-width mb-2"
                appearance="outline"
              >
                <mat-label>Subject Number</mat-label>
                <input
                  matInput
                  placeholder="Subject Number"
                  formControlName="subjectNumber"
                />
              </mat-form-field>
            </div>
          </ng-container>

          <div>
            <mat-form-field
              class="default-control-width mb-2"
              appearance="outline"
            >
              <mat-label
                >Please Briefly Describe the Complaint details</mat-label
              >
              <mat-hint
                >Describe the sequence of events and include the dose
                missed/received.</mat-hint
              >
              <textarea
                matInput
                placeholder="Complaint Description"
                formControlName="complaintDescription"
              ></textarea>
            </mat-form-field>
          </div>
        </div>
        <div class="mt-4 d-flex justify-content-between">
          <button mat-stroked-button color="secondary" matStepperPrevious>
            <mat-icon>arrow_back</mat-icon> Back
          </button>
          <button
            mat-raised-button
            color="primary"
            class="primary-btn"
            matStepperNext
          >
            Continue <mat-icon iconPositionEnd>arrow_forward</mat-icon>
          </button>
        </div>
      </form>
    </mat-step> -->
    <mat-step
      [editable]="!complaintSubmitted"
      [completed]="complaintSubmitted"
      class="w-75 h-100"
    >
      <ng-template matStepLabel>Review</ng-template>
      <div class="w-100 h-100 d-flex flex-column gap-2">
        <div
          *ngIf="!complaintSubmitted"
          class="h-100 d-flex flex-column align-items-center gap-2"
        >
          <div
            class="flex-grow-1 bg-white rounded-3 shadow px-3 px-sm-5 py-3 d-flex flex-column align-items-center mb-2"
          >
            <div class="w-100">
              <h2 class="text-center">REVIEW</h2>
              <div class="w-75 border rounded-3 px-5 py-3 me-auto ms-auto">
                <h3 class="fw-semibold">Preliminary Information</h3>
                <div class="row" *ngFor="let control of formControls">
                  <div class="col-sm-12 col-lg-6">{{ control.label }}</div>
                  <div class="col-sm-12 col-lg-6">{{ control.value }}</div>
                </div>
              </div>
            </div>
            <div class="text-center privacy-text mt-3 w-50">
              JnJ will handle this adverse event, contact information, and
              personal information provided in accordance with its Privacy
              Policy. You can view Janssen's Privacy Policy by clicking on the
              link <a href="#"> Janssen's Privacy Policy</a>
            </div>
            <mat-checkbox
              class="example-margin"
              color="primary"
              [(ngModel)]="privacyPolicyChecked"
              >I acknowledge Janssen's Privacy Policy</mat-checkbox
            >
          </div>

          <div class="mt-4 d-flex justify-content-center w-100 gap-5">
            <button mat-stroked-button color="secondary" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon> Back
            </button>
            <button
              mat-raised-button
              color="primary"
              class="primary-btn"
              (click)="submitComplaint()"
              [disabled]="!privacyPolicyChecked"
            >
              Submit <mat-icon iconPositionEnd>done</mat-icon>
            </button>
          </div>
        </div>
        <!-- <div *ngIf="!complaintSubmitted">
        <div style="text-align: left">
          <h3><strong>Product</strong></h3>
        </div>

        <div style="text-align: left; margin-left: 0">
          <table>
            <tr>
              <td><strong>Product: </strong></td>
              <td>{{ productFormGroup.controls["brand"].value }}</td>
            </tr>

            <ng-container
              *ngIf="productFormGroup.controls['lotNumber'].value as lotNumber"
            >
              <tr>
                <td><strong>Batch : </strong></td>
                <td>{{ lotNumber }}</td>
              </tr>
            </ng-container>
          </table>
        </div>
        <div>
          <div style="text-align: left; margin-top: 35px">
            <h3><strong>Details</strong></h3>
          </div>
          <div style="text-align: left; margin-left: 0" ng-if>
            <table>
              <thead>
                <tr>
                  <th>Question</th>
                  <th>Response</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let question of problemDetailsQuestions">
                  <td>{{ question.questionText }}</td>
                  <td>
                    {{ problemDetailsQuestionsFormGroup.value[question.id] }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="mt-4 d-flex justify-content-between">
            <button mat-stroked-button color="secondary" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon> Back
            </button>
            <button
              mat-raised-button
              color="primary"
              (click)="submitComplaint()"
            >
              Submit <mat-icon>done</mat-icon>
            </button>
          </div>
        </div>
      </div> -->
        <div
          *ngIf="complaintSubmitted"
          class="d-flex flex-column align-items-center text-align-center mt-4"
        >
          <h3><strong>Thanks for submitting your case!</strong></h3>
          <p>We will contact you if any additional information is required.</p>
        </div>
      </div>
    </mat-step>
    <!-- <mat-step *ngIf="problemDetailsDone">
      <ng-template matStepLabel>Confirmation</ng-template>
      <div style="text-align:center;margin-top: 50px;">
        <h3><strong>Thanks for submitting the request, We will contact you if any additional information is required</strong></h3>
      </div>

    </mat-step> -->
  </mat-stepper>
</div>
